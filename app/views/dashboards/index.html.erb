<div class="dashboard-container">
  <div class="dashboard-top">
    <h1>Dashboards</h1>
  </div>


  <div class="dashboard-visit-container">
    <div class="dashboard-visit-title">
      <h2> Vos futures visites</h2>
    </div>
    <div class="dashboard-visit-list-container">

      <% @user_bookings.each do |book| %>
      <div class="dashboard-visit-list">
        <p><%= book.flat.title %></p>
        <p>Le <%= book.entry_date %></p>
        <%= link_to flat_path(book.flat) do %>
        voir lieu
        <%end%>
      </div>
      <% end %>

    </div>
  </div>


  <div class="dashboard-booking-container">

    <div class="dashboard-booking-waiting">
      <div class="dashboard-booking-waiting-title">
        <h2>Bookings en attente</h2>
      </div>
      <div class="dashboard-booking-content">
        <% @my_flats_bookings_unconfirmed.each do |booking| %>
          <div class="dashboard-waiting-booking-infos">
            <p>Réservation pour</p>
            <p><strong><%= booking.flat.title %></strong></p>
            <p>du <strong><%= booking.entry_date %></strong> au <strong><%= booking.out_date %></strong></p>
            <p>pour <strong><%= booking.guest %></strong> invité(s)</p>
          </div>
          <div class="dashboard-waiting-booking-infos-button">
            <%= link_to "Confimer", flat_booking_path(booking.flat, booking, booking: {confirmed: true}),
                  data: { turbo_method: :patch, turbo_confirm: "Confirmé cette réservation." } %>
            <%= link_to "Delete", flat_booking_path(booking.flat, booking),
                  data: { turbo_method: :delete, turbo_confirm: "Are you sure delete this book ?" } %>
          </div>
        <% end %>
      </div>
    </div>


    <div class="dashboard-booking-waiting">
      <div class="dashboard-booking-waiting-title">
        <h2>Historique</h2>
      </div>
      <div class="dashboard-booking-content">
        <% @my_flats_bookings_confirmed.each do |booking| %>
        <div class="dashboard-waiting-booking-infos">
            <p>Réservation pour</p>
            <p><strong><%= booking.flat.title %></strong></p>
            <p>du <strong><%= booking.entry_date %></strong> au <strong><%= booking.out_date %></strong></p>
            <p>pour <strong><%= booking.guest %></strong> invité(s)</p>        </div>
        <div class="dashboard-waiting-booking-infos-button">
          <%= link_to "Delete", flat_booking_path(booking.flat, booking),
                data: { turbo_method: :delete, turbo_confirm: "Are you sure ?" } %>
        </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class="dashboard-user-flats-container">
    <div class="dashboard-user-flats-title">
      <h2>Mes biens</h2>
    </div>
    <div class="dashboard-user-flats-list-container">
      <% @flats.each do |flat| %>
      <div class="dashboard-user-flats-list">
          <p><strong><%= flat.title %></strong>
          <p>Prix : <strong><%= flat.price %> €</strong></p>
          <p>Nombre personne autorisé : <strong><%= flat.guest %></strong></p>
          <p>Nombre chambre : <strong><%= flat.bedroom %></strong></p>
          <p>Description : <strong><%= flat.description %></strong></p>
          <p>Address : <strong><%= flat.address %></strong></p>
          <div class="dashboard-waiting-booking-infos-button">
          <%= link_to "Delete", flat_path(flat),
                                          data: { turbo_method: :delete, turbo_confirm: "Are you sure delete this flat?" } %>
          </div></p>
      </div>
        <% end %>
    </div>
    <%= link_to "flats/new" do  %>
    Créer un appart
    <% end %>
  </div>

</div>
